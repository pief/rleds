#
# rleds - Router LED control program
# Copyright (c) 2006 by Pieter Hollants <pieter@hollants.com>
#
# This software is licensed under the GNU General Public License, version 2,
# as published by the Free Software Foundation and available in the file
# COPYING and the Internet location http://www.gnu.org/licenses/gpl.html.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
# or FITNESS FOR A PARTICULAR PURPOSE.
#

PACKAGE_NAME = @PACKAGE_NAME@
PACKAGE_VERSION = @PACKAGE_VERSION@

CC = @CC@
CFLAGS = @CFLAGS@ -DPACKAGE_NAME=\"$(PACKAGE_NAME)\" -DPACKAGE_VERSION=\"$(PACKAGE_VERSION)\"

all: rleds

rleds.o: rleds.h

.c.o:
	$(CC) $(CFLAGS) -c $< -o $@

clean:
	-rm -rf *.o rleds

release:
	@SRCDIR=`pwd`; \
	TMPDIR=`mktemp -d /tmp/rleds.XXXX`; \
	cd $${TMPDIR}; \
	mkdir rleds-$(PACKAGE_VERSION); \
	cp -a $${SRCDIR}/rleds.[ch] \
	      $${SRCDIR}/configure.in \
	      $${SRCDIR}/configure \
	      $${SRCDIR}/Makefile.in \
	      $${SRCDIR}/README \
	      rleds-$(PACKAGE_VERSION)/; \
	[ -f $${SRCDIR}/rleds-$(PACKAGE_VERSION).tar.bz2 ] && rm $${SRCDIR}/rleds-$(PACKAGE_VERSION).tar.bz2; \
	tar cvjf $${SRCDIR}/rleds-$(PACKAGE_VERSION).tar.bz2 rleds-$(PACKAGE_VERSION); \
	cd $${SRCDIR}; \
	rm -rf $${TMPDIR}
